<!DOCTYPE html>
<html lang="pt-br">

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

	<title>Produto Detalhado</title>

	<!-- Google font -->
	<link href="https://fonts.googleapis.com/css?family=Montserrat:400,500,700" rel="stylesheet">

	<!-- Bootstrap -->
	<link type="text/css" rel="stylesheet" th:href="@{/dist/css/bootstrap.min.css}" />

	<!-- Slick -->
	<link type="text/css" rel="stylesheet" th:href="@{/dist/css/slick.css}" />
	<link type="text/css" rel="stylesheet" th:href="@{/dist/css/slick-theme.css}" />

	<!-- nouislider -->
	<link type="text/css" rel="stylesheet" th:href="@{/dist/css/nouislider.min.css}" />

	<!-- Font Awesome Icon -->
	<link rel="stylesheet" th:href="@{/dist/css/font-awesome.min.css}">

	<!-- Custom stlylesheet -->
	<link type="text/css" rel="stylesheet" th:href="@{/dist/css/style.css}" />
	<link type="text/css" rel="stylesheet" th:href="@{/dist/css/modal-carrinho.css}" />

	<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
	<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
	<!--[if lt IE 9]>
		  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
		  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->

</head>

<body>

	<!-- HEADER -->
	<header>

		<!-- TOP HEADER -->
		<div id="top-header">
			<div class="container">
				<ul class="header-links pull-left">
					<li><a href="#"><i class="fa fa-phone"></i> (91) 3200-0000</a></li>
					<li><a href="#"><i class="fa fa-envelope"></i> email@email.com</a></li>
					<li><a href="#"><i class="fa fa-map-marker"></i> BR 316 KM 18</a></li>
				</ul>
				<ul class="header-links pull-right" th:if="${session.usuarioLogado == null}">
					<li><a th:href="@{/login}"><i class="fa fa-user"></i> Entrar</a></li>
				</ul>
				<ul class="header-links pull-right" th:if="${session.usuarioLogado != null}">
					<li><a th:href="@{/logout}"><i class="fa fa-sign-out"></i> Sair</a></li>
				</ul>
			</div>
		</div>
		<!-- /TOP HEADER -->

		<!-- MAIN HEADER -->
		<div id="header">

			<!-- container -->
			<div class="container">

				<!-- row -->
				<div class="row">
					<!-- LOGO -->
					<div class="col-md-3">
						<div class="header-logo">
							<a href="/" class="logo">
								<img src="/image/logo-projeto-web.png" alt="" height="70px">
							</a>
						</div>
					</div>
					<!-- /LOGO -->

					<!-- ACCOUNT -->
					<div class="col-md-2 clearfix" th:if="${session.usuarioLogado != null}">

						<div class="header-ctn">

							<!-- Cart -->
							<div class="dropdown-carrinho" id="dropdownCarrinho">
								<a href="#" class="btn-carrinho btn-carrinho-link" id="btnDropdown"><i
										class="fa fa-shopping-cart"></i>
									Carrinho<span id="contadorItensCarrinho" class="qtd-item">0</span></a>
								<div class="carrinho-conteudo" id="carrinhoConteudo">
									<h3>Seu Carrinho</h3>
									<div id="listaItensCarrinho">
										<p id="carrinhoVazioMsg" style="text-align: center; color: gray;">O carrinho
											está vazio.</p>
									</div>
									<hr>
									<div class="carrinho-footer">
										<p class="total-compra">Total: <span id="valorTotalCompra">R$ 0,00</span></p>
										<button class="btn-finalizar" id="btnFinalizarPedido">Finalizar Pedido</button>
									</div>
								</div>
							</div>
							<!-- /Cart -->

						</div>

					</div>
					<!-- /ACCOUNT -->

				</div>
				<!-- row -->

			</div>
			<!-- container -->

		</div>
		<!-- /MAIN HEADER -->

	</header>
	<!-- /HEADER -->

	<!-- NAVIGATION -->
	<nav id="navigation">

		<!-- container -->
		<div class="container">

			<!-- responsive-nav -->
			<div id="responsive-nav">

				<!-- NAV -->
				<ul class="main-nav nav navbar-nav">
					<li class="active"><a href="/">Home</a></li>
					<li th:each="cat : ${categorias}"><a href="#" th:text="${cat.nome}"></a></li>
				</ul>
				<!-- /NAV -->

			</div>
			<!-- /responsive-nav -->

		</div>
		<!-- /container -->

	</nav>
	<!-- /NAVIGATION -->

	<!-- SECTION -->
	<div class="section">

		<!-- container -->
		<div class="container">

			<!-- row -->
			<div class="row">

				<!-- Product main img -->
				<div class="col-md-5 col-md-push-2">
					<div id="product-main-img">
						<div class="product-preview">
							<img th:src="@{'/imagem/' + ${produto.idProduto}}" alt="">
						</div>
					</div>
				</div>
				<!-- /Product main img -->

				<!-- Product thumb imgs -->
				<div class="col-md-2  col-md-pull-5">
					<div id="product-imgs">
						<div class="product-preview">
							<img th:src="@{'/imagem/' + ${produto.idProduto}}" alt="">
						</div>
					</div>
				</div>
				<!-- /Product thumb imgs -->

				<!-- Product details -->
				<div class="col-md-5">
					<div class="product-details">
						<h2 class="product-name" th:text="${produto.nome}"></h2>
						<div>
							<div class="product-rating">
								<span th:text="${#numbers.formatDecimal(media, 1, 1)}">0,00</span>
								<i th:each="star : ${estrelasMedia}" class="fa" th:classappend="' ' + ${star}"></i>
								<span th:text="${qtdAvaliacoes} + ' Avaliação(ões)'"></span>
							</div>
						</div>

						<div>
							<h3 class="product-price" th:text="${#numbers.formatCurrency(produto.preco)}"></h3>
						</div>
						<p th:text="${produto.descricao}"></p>

						<div class="add-to-cart" th:if="${session.usuarioLogado != null}">
							<button class="btn-add-carrinho" th:data-idproduto="${produto.idProduto}"
								th:data-nome="${produto.nome}" th:data-descricao="${produto.descricao}"
								th:data-preco="${produto.preco}" th:data-estoque="${produto.estoque}"
								th:data-endpoint-imagem="@{/imagem/{id}(id=${produto.idProduto})}"><i
									class="fa fa-shopping-cart"></i> Add ao Carrinho
							</button>
						</div>

						<ul class="product-links">
							<li>Categoria:</li>
							<li><a href="#" th:text="${produto.categoria.nome}"></a></li>
						</ul>

						<ul class="product-links">
							<li>Compartilhar:</li>
							<li><a href="#"><i class="fa fa-facebook"></i></a></li>
							<li><a href="#"><i class="fa fa-twitter"></i></a></li>
							<li><a href="#"><i class="fa fa-google-plus"></i></a></li>
							<li><a href="#"><i class="fa fa-envelope"></i></a></li>
						</ul>
					</div>
				</div>
				<!-- /Product details -->

				<!-- Product tab -->
				<div class="col-md-12">
					<div id="product-tab">

						<!-- product tab nav -->
						<ul class="tab-nav">
							<li class="active"><a data-toggle="tab" href="#tab1">Descrição</a></li>
							<li><a data-toggle="tab" href="#tab2">Avaliações</a></li>
						</ul>
						<!-- /product tab nav -->

						<!-- product tab content -->
						<div class="tab-content">

							<!-- tab1  -->
							<div id="tab1" class="tab-pane fade in active">

								<div class="row">
									<div class="col-md-12">
										<p th:text="${produto.descricao}"></p>
									</div>
								</div>

							</div>
							<!-- /tab1  -->

							<!-- tab2  -->
							<div id="tab2" class="tab-pane fade in">

								<div class="row">
									<!-- Rating -->
									<div class="col-md-3">
										<div id="rating">
											<div class="rating-avg">
												<span th:text="${#numbers.formatDecimal(media, 1, 1)}">0,00</span>
												<div class="rating-stars">
													<i th:each="star : ${estrelasMedia}" class="fa"
														th:classappend="' ' + ${star}"></i>
												</div>
											</div>
											<div class="rating-breakdown">
												<div th:each="i : ${#numbers.sequence(5,1)}" class="row-rating">

													<!-- Estrelas -->
													<div class="stars">
														<i th:each="star : ${#numbers.sequence(1,5)}"
															th:classappend="${star <= i} ? 'fa fa-star' : 'fa fa-star-o'"></i>
													</div>
													<!-- /Estrelas -->

													<!-- Barra -->
													<div class="bar-container">
														<div class="bar-fill"
															th:style="'width:' + ${percentualPorEstrela.get(i)} + '%'">
														</div>
													</div>
													<!-- /Barra -->

													<!-- Quantidade -->
													<div class="count" th:text="${qtdPorEstrela.get(i)}"></div>
													<!-- /Quantidade -->

												</div>

											</div>

										</div>

									</div>
									<!-- /Rating -->

									<!-- Reviews -->
									<div class="col-md-6">

										<div id="reviews">
											<ul class="reviews" th:each="a : ${avaliacoes}">
												<li>
													<div class="review-heading">
														<h5 class="name" th:text="${a.clienteNome}"></h5>
														<p class="date"
															th:text="${#strings.toUpperCase(a.dataFormatada) + ', ' + (a.horaFormatada)}">
														</p>
														<div class="review-rating">
															<i class="fa" th:each="i : ${#numbers.sequence(1,5)}"
																th:classappend="${i <= a.estrelas} ? ' fa-star' : ' fa-star-o'"></i>
														</div>
													</div>

													<div class="review-body">
														<p th:text="${a.comentario}">Comentário aqui</p>
													</div>
												</li>
											</ul>
										</div>

									</div>
									<!-- /Reviews -->

									<!-- Review Form -->
									<div class="col-md-3">

										<div id="review-form" th:if="${session.usuarioLogado != null}">
											<form id="formAvaliacao" class="review-form">
												<textarea id="comentarioAvaliacao" class="input"
													placeholder="Sua Avaliação"></textarea>

												<div class="input-rating">
													<span>Sua Classificação: </span>
													<div class="stars">
														<input id="star5" name="rating" value="5" type="radio">
														<label for="star5"></label>

														<input id="star4" name="rating" value="4" type="radio">
														<label for="star4"></label>

														<input id="star3" name="rating" value="3" type="radio">
														<label for="star3"></label>

														<input id="star2" name="rating" value="2" type="radio">
														<label for="star2"></label>

														<input id="star1" name="rating" value="1" type="radio">
														<label for="star1"></label>
													</div>

												</div>

												<!-- ID do produto escondido -->
												<input type="hidden" id="idProduto" th:value="${produto.idProduto}">

												<button type="submit" class="primary-btn">Enviar</button>
											</form>

										</div>

									</div>
									<!-- /Review Form -->

								</div>

							</div>

						</div>
						<!-- /product tab content  -->

					</div>

				</div>
				<!-- /product tab -->

			</div>
			<!-- /row -->

		</div>
		<!-- /container -->

	</div>
	<!-- /SECTION -->

	<!-- Modal -->
	<div id="modalAddCarrinho" class="modal">

		<div class="modal-conteudo">

			<span class="fechar-modal">&times;</span>

			<div class="modal-corpo">

				<img id="modalImagem" src="" alt="Imagem do Produto" class="modal-imagem">

				<div>
					<h2 id="modalNome"></h2>
					<p id="modalDescricao"></p>
					<p class="modal-preco" id="modalPreco"></p>
					<p class="modal-estoque" id="modalEstoque"></p>

					<label for="inputQuantidade">Quantidade:</label>
					<input type="number" id="inputQuantidade" value="1" min="1" max="10">
					<small class="erro-quantidade"></small>
				</div>

			</div>

			<div class="modal-footer">
				<button class="btn-confirmar" id="btnConfirmarAdd">Confirmar Adição</button>
			</div>

		</div>

	</div>
	<!-- /modal -->

	<!-- Section -->
	<div class="section">

		<!-- container -->
		<div class="container">

			<!-- row -->
			<div class="row">

				<div class="col-md-12">
					<div class="section-title text-center">
						<h3 class="title">Produtos Relacionados</h3>
					</div>
				</div>

				<!-- product -->
				<div class="col-md-3 col-xs-6" th:each="p : ${produtos}">

					<div class="product">

						<div class="product-img">
							<img th:src="@{'/imagem/' + ${p.idProduto}}" alt="" height="400px">
						</div>

						<div class="product-body">
							<p class="product-category" th:text="${p.categoria.nome}"></p>
							<h3 class="product-name"><a href="#" th:text="${p.nome}"></a></h3>
							<h4 class="product-price" th:text="${#numbers.formatCurrency(p.preco)}"></h4>

							<div class="product-rating">
							</div>

							<div class="product-btns">
								<form th:id="|formDetalhes${p.idProduto}|" th:action="@{/produto/detalhado}"
									method="post" style="display:none;">
									<input type="hidden" name="idProduto" th:value="${p.idProduto}">
								</form>

								<a href="javascript:void(0)"
									th:onclick="|document.getElementById('formDetalhes${p.idProduto}').submit()|"
									class="quick-view">
									<i class="fa fa-eye"></i><span class="tooltipp"> Detalhes</span>
								</a>
							</div>

						</div>

					</div>

				</div>
				<!-- /product -->

			</div>
			<!-- /row -->

		</div>
		<!-- /container -->

	</div>
	<!-- /Section -->

	<!-- FOOTER -->
	<footer id="footer">

		<!-- top footer -->
		<div class="section">

			<!-- container -->
			<div class="container">

				<!-- row -->
				<div class="row">

					<div class="col-md-3 col-xs-6">
						<div class="footer">

							<h3 class="footer-title">Sobre nós</h3>

							<p>Modelo de Web Loja - Projeto de Web Designer.</p>

							<ul class="footer-links">
								<li><a href="#"><i class="fa fa-map-marker"></i>BR 316 KM 18</a></li>
								<li><a href="#"><i class="fa fa-phone"></i>(91) 3200-0000</a></li>
								<li><a href="#"><i class="fa fa-envelope-o"></i>email@email.com</a></li>
							</ul>

						</div>
					</div>

					<div class="col-md-3 col-xs-6">
						<div class="footer">
							<h3 class="footer-title">Categorias</h3>
							<ul class="footer-links">
								<li th:each="cat : ${categorias}"><a href="#" th:text="${cat.nome}"></a></li>
							</ul>
						</div>
					</div>

					<div class="clearfix visible-xs"></div>

					<div class="col-md-3 col-xs-6">
						<div class="footer">

							<h3 class="footer-title">Informações</h3>

							<ul class="footer-links">
								<li><a href="#">Sobre nós</a></li>
								<li><a href="#">Contate-nos</a></li>
								<li><a href="#">Política de Privacidade</a></li>
								<li><a href="#">Pedidos e Devoluções</a></li>
								<li><a href="#">Termos & Condições</a></li>
							</ul>

						</div>

					</div>

					<div class="col-md-3 col-xs-6">

						<div class="footer">

							<h3 class="footer-title">Serviços</h3>

							<ul class="footer-links">
								<li><a href="#">Minha conta</a></li>
								<li><a href="#">Visualizar carrinho</a></li>
								<li><a href="#">Ajuda</a></li>
							</ul>

						</div>

					</div>

				</div>
				<!-- /row -->

			</div>
			<!-- /container -->

		</div>
		<!-- /top footer -->

		<!-- bottom footer -->
		<div id="bottom-footer" class="section">

			<!-- container -->
			<div class="container">

				<!-- row -->
				<div class="row">

					<div class="col-md-12 text-center">

						<ul class="footer-payments">
							<li><a href="#"><i class="fa fa-cc-visa"></i></a></li>
							<li><a href="#"><i class="fa fa-credit-card"></i></a></li>
							<li><a href="#"><i class="fa fa-cc-paypal"></i></a></li>
							<li><a href="#"><i class="fa fa-cc-mastercard"></i></a></li>
							<li><a href="#"><i class="fa fa-cc-discover"></i></a></li>
							<li><a href="#"><i class="fa fa-cc-amex"></i></a></li>
						</ul>

						<span class="copyright">
							<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
							Copyright &copy;
							<script>document.write(new Date().getFullYear());</script> Todos Direitos Reservados
							<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
						</span>

					</div>

				</div>
				<!-- /row -->

			</div>
			<!-- /container -->

		</div>
		<!-- /bottom footer -->

	</footer>
	<!-- /FOOTER -->

	<div class="toast-container" id="toastContainer"></div>

	<!-- jQuery Plugins -->
	<script th:src="@{/dist/js/jquery.min.js}"></script>
	<script th:src="@{/dist/js/avaliacoes.js}"></script>
	<script th:src="@{/dist/js/modal-carrinho.js}"></script>
	<script th:src="@{/dist/js/bootstrap.min.js}"></script>
	<script th:src="@{/dist/js/slick.min.js}"></script>
	<script th:src="@{/dist/js/nouislider.min.js}"></script>
	<script th:src="@{/dist/js/jquery.zoom.min.js}"></script>
	<script th:src="@{/dist/js/main.js}"></script>
</body>

</html>